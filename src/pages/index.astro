---
import Base from "../layouts/Base.astro";
import { sortByDate } from "../utils/dates.ts";
import { formatDate } from "../utils/dates.ts";

interface Frontmatter {
  title: string;
  topic: string;
  date: string;
}

interface Entry {
  frontmatter: Frontmatter;
  url: string;
}

interface Note {
  frontmatter: Frontmatter;
  url: string;
}

const entries = import.meta.glob("./entries/*.md", { eager: true });
const entry: Entry = Object.values(entries).sort(sortByDate)[0] as Entry;
const entryDate = formatDate(entry.frontmatter.date.toString());

const notes = import.meta.glob("./notes/*.md", { eager: true });
const note: Note = Object.values(notes).sort(sortByDate)[0] as Note;
const noteDate = formatDate(note.frontmatter.date.toString());
---

<Base>
  <main class="container">
    <section class="welcome">
      <h1>Welcome</h1>
      <p class="subtitle">
        I'm someone who enjoys learning and creating things. Here I share some
        thoughts and showcase a little bit of what piques my interest.
      </p>
    </section>
    <section class="card">
      <a href="entries/reasons-for-this-site" class="card__content">
        <h3>Currently</h3>
        <h2>Crafting a Digital Space</h2>
        <p class="subtitle">Working on a space that feels genuine to me.</p>
        <p class="card__cta">If interested &rarr;</p>
      </a>
    </section>
    <section class="card">
      <a href={entry.url} class="card__content">
        <h3>Latest Entry</h3>
        <h2>{entry.frontmatter.title}</h2>
        <p class="subtitle">{`${entryDate} - ${entry.frontmatter.topic}`}</p>
        <p class="card__cta">Continue reading &rarr;</p>
      </a>
    </section>
    <section class="card">
      <a href="notes" class="card__content">
        <h3>Latest Note</h3>
        <h2>{note.frontmatter.title}</h2>
        <p class="subtitle">{`${noteDate} - ${note.frontmatter.topic}`}</p>
        <p class="card__cta">Browse notes &rarr;</p>
      </a>
    </section>
    <p class="subtitle">
      Feel free to reach out to me if you have any questions or want to chat
      about literally anything. You can contact me via the links below.
    </p>
  </main>
</Base>
