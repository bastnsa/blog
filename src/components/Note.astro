---
import { Image } from "astro:assets";
import { formatDate } from "../utils/dates.ts";
import readIcon from "../assets/read.svg";

const { title, topic, date, image } = Astro.props;
const formattedDate = formatDate(date.toString());
---

<div class="note-wrapper">
  <div class="note">
    <div class="flex-row">
      <span>{`${formattedDate} - ${topic}`}</span>
      <a
        href={`/notes/${title.toLowerCase().split(" ").join("-")}`}
        class="note__link"
      >
        <Image
          class="note__icon"
          src={readIcon}
          alt="Read"
          width="20"
          height="20"
          loading="lazy"
        />
      </a>
    </div>
    <h2>{title}</h2>
    {
      image && (
        <div class="note__img">
          <Image
            src={image.src}
            alt={image.alt}
            width="100"
            height="100"
            loading="eager"
          />
        </div>
      )
    }
    <div class="markdown__content">
      <slot />
    </div>
  </div>
</div>
